!function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){},function(t,e,r){"use strict";r.r(e);r(0);class i{constructor(t,e,r,i,s,a){this.x=t,this.y=e,this.ctx=r,this.position=i,this.colorLeft="black",this.colorRight="rgb(121, 118, 118)",this.isCar=s,this.coordOfEndDraw=705,this.frameStep=30,this.coordOfStartDraw=-265,this.enemyNumbers=a}clearLeftEnemy(){this.ctx.fillStyle="rgb(121, 118, 118)",this.render(0)}drawLeftEnemy(){this.ctx.fillStyle="black",this.render(0)}drawRightEnemy(){this.ctx.fillStyle="black",this.render(90)}clearRightEnemy(){this.ctx.fillStyle="rgb(121, 118, 118)",this.render(90)}drawCarLeft(){this.ctx.fillStyle=this.colorLeft,this.render(0)}drawCarRight(){this.ctx.fillStyle=this.colorRight,this.render(90)}moveCarRight(){this.position="right",this.colorLeft="rgb(121, 118, 118)",this.colorRight="black",this.drawCarLeft(),this.drawCarRight()}moveCarLeft(){this.position="left",this.colorLeft="black",this.colorRight="rgb(121, 118, 118)",this.drawCarLeft(),this.drawCarRight()}enemyDraw(t){this.enemyNumbers[t]?this.clearRightEnemy():this.clearLeftEnemy(),this.y+=this.frameStep,this.enemyNumbers[t]?this.drawRightEnemy():this.drawLeftEnemy(),this.y>=this.coordOfEndDraw&&(this.y=this.coordOfStartDraw,this.enemyNumbers.spawner(t))}render(t){const e=this.isCar?-60:0,r=this.isCar?-120:0,i=this.isCar?-180:0;this.ctx.fillRect(this.x+t,this.y,25,25),this.ctx.clearRect(this.x+t+5,this.y+5,15,15),this.ctx.fillRect(this.x+t+8,this.y+8,9,9),this.ctx.fillRect(this.x+t+60,this.y,25,25),this.ctx.clearRect(this.x+t+65,this.y+5,15,15),this.ctx.fillRect(this.x+t+68,this.y+8,9,9),this.ctx.fillRect(this.x+t+30,this.y+e+30,25,25),this.ctx.clearRect(this.x+t+35,this.y+e+35,15,15),this.ctx.fillRect(this.x+t+38,this.y+e+38,9,9),this.ctx.fillRect(this.x+t+30,this.y+r+60,25,25),this.ctx.clearRect(this.x+t+35,this.y+r+65,15,15),this.ctx.fillRect(this.x+t+38,this.y+r+68,9,9),this.ctx.fillRect(this.x+t+30,this.y+i+90,25,25),this.ctx.clearRect(this.x+t+35,this.y+i+95,15,15),this.ctx.fillRect(this.x+t+38,this.y+i+98,9,9),this.ctx.fillRect(this.x+t,this.y+r+60,25,25),this.ctx.clearRect(this.x+t+5,this.y+r+65,15,15),this.ctx.fillRect(this.x+t+8,this.y+r+68,9,9),this.ctx.fillRect(this.x+t+60,this.y+r+60,25,25),this.ctx.clearRect(this.x+t+65,this.y+r+65,15,15),this.ctx.fillRect(this.x+t+68,this.y+r+68,9,9)}}class s{constructor({preload:t,src:e}){this.src=e,this.preload=t,this.audio=new Audio}init(){this.audio.preload=this.preload,this.audio.src=this.src}play(){this.audio.play()}pause(){this.audio.pause()}}const a={firstEnemy:!1,secondEnemy:!1,thirdCar:!1,playerCar:!1},l=localStorage.getItem("hiScore"),o={life1:document.getElementById("life1"),life2:document.getElementById("life2"),life3:document.getElementById("life3"),life4:document.getElementById("life4"),startLogo:document.getElementById("startLogo"),startButton:document.getElementById("startButton"),realStart:document.getElementById("realStart"),scoreWindow:document.getElementById("score"),hiScoreWindow:document.getElementById("hiScore"),left:document.getElementById("left"),right:document.getElementById("right")},c={startCrashDanger:395,endCrashDanger:605,fistEnemyStartPos:-175,secondEnemyStartPos:-505,thirdEnemyStartPos:-835,hiScoreNumber:parseInt(l,10)},n=document.getElementById("tutorial").getContext("2d"),h={x:5,y:-295,roadHeight:30,eachHollowBlock:4,frameStep:30,drawBlock:()=>{let{y:t}=h;for(let e=0;e<h.roadHeight;e+=1)0===e||e%h.eachHollowBlock==0?n.fillStyle="rgb(121, 118, 118)":n.fillStyle="black",n.fillRect(5,t,25,25),n.clearRect(10,t+5,15,15),n.fillRect(13,t+8,9,9),n.fillRect(275,t,25,25),n.clearRect(280,t+5,15,15),n.fillRect(283,t+8,9,9),t+=h.frameStep}},d={x:5,y:5,i:0,pixelStep:30,oneColumnBoxesCnt:21,startYposition:5,allCreatedBlocks:208},y=new class{constructor(){this.randomFistNumber=0,this.randomSecondNumber=0,this.randomThirdNumber=0}spawner(t){this[t]=Math.floor(Math.random()*Math.floor(2))}},m=new i(65,-175,n,!1,!1,y),f=new i(65,-505,n,!1,!1,y),u=new i(65,-835,n,!1,!1,y),x=new i(65,575,n,"left",!0,!1),p=new s({preload:"auto",src:"./music/race.mp3"}),b=new s({preload:"auto",src:"./music/crash.mp3"});p.init(),b.init();const g=({code:t})=>{if(!a.playerCar)switch(t){case"ArrowLeft":x.moveCarLeft();break;case"ArrowRight":x.moveCarRight()}},S=()=>{a.playerCar||x.moveCarLeft()},w=()=>{a.playerCar||x.moveCarRight()};(()=>{o.left.addEventListener("click",S),o.right.addEventListener("click",w),document.addEventListener("keydown",g)})();let E=!1,R=0,C=400,L=!1;const k=()=>{x.drawCarLeft(),x.drawCarRight(),(()=>{const{y:t}=h;h.y<5?(h.y+=30,h.drawBlock(t)):(h.y=-235,h.y+=30,h.drawBlock(t))})(),m.enemyDraw("randomFistNumber"),f.enemyDraw("randomSecondNumber"),u.enemyDraw("randomThirdNumber")};let v=4;const B=()=>{setTimeout(()=>{L=!0,B()},5e3)},N=()=>{const t=setInterval(()=>{const e=()=>{clearInterval(t)};L&&C>100&&(C-=70,e(),N(),L=!1),a.playerCar?a.playerCar&&(m.y=c.fistEnemyStartPos,f.y=c.secondEnemyStartPos,u.y=c.thirdEnemyStartPos,a.fistEnemy=!1,a.secondEnemy=!1,a.thirdEnemy=!1,C=400,e(),p.pause(),b.play(),(()=>{switch(v-=1,v){case 3:o.life4.classList.add("disable");break;case 2:o.life3.classList.add("disable");break;case 1:o.life2.classList.add("disable");break;case 0:R=0,v=4,o.life2.classList.remove("disable"),o.life3.classList.remove("disable"),o.life4.classList.remove("disable")}})()):(k(),R+=10,l||(localStorage.setItem("hiScore",0),c.hiScoreNumber=R,o.scoreWindow.innerHTML="score:"+R,o.hiScoreWindow.innerHTML="Hi-Score:"+c.hiScoreNumber),c.hiScoreNumber<=R&&(c.hiScoreNumber=R,localStorage.setItem("hiScore",R)))},C)},I=()=>{(()=>{n.fillStyle="rgb(121, 118, 118)";for(let t=5;t<600;t+=30)for(let e=5;e<300;e+=30)n.fillRect(e,t,25,25),n.clearRect(e+5,t+5,15,15),n.fillRect(e+8,t+8,9,9)})(),y.spawner("randomFistNumber"),y.spawner("randomSecondNumber"),y.spawner("randomThirdNumber"),p.play(),N()};o.startButton.addEventListener("click",()=>{E||(B(),a.playerCar=!1,o.startLogo.classList.add("disable"),I(),E=!0)}),o.realStart.addEventListener("click",()=>{E||(setTimeout(()=>{L=!0,B(),C=101},12500),a.playerCar=!1,o.startLogo.classList.add("disable"),I(),E=!0)});const T=()=>{o.scoreWindow.innerHTML="score:"+R,o.hiScoreWindow.innerHTML="Hi-Score:"+c.hiScoreNumber,(()=>{const{position:t}=x,{startCrashDanger:e,endCrashDanger:r}=c;switch(t){case"left":a.fistEnemy&&!y.randomFistNumber&&(a.playerCar=!0,E=!1),a.secondEnemy&&!y.randomSecondNumber&&(a.playerCar=!0,E=!1),a.thirdEnemy&&!y.randomThirdNumber&&(a.playerCar=!0,E=!1);break;case"right":a.fistEnemy&&y.randomFistNumber&&(a.playerCar=!0,E=!1),a.secondEnemy&&y.randomSecondNumber&&(a.playerCar=!0,E=!1),a.thirdEnemy&&y.randomThirdNumber&&(a.playerCar=!0,E=!1)}m.y===e&&(a.fistEnemy=!0),f.y===e&&(a.secondEnemy=!0),u.y===e&&(a.thirdEnemy=!0),m.y===r&&(a.fistEnemy=!1),f.y===r&&(a.secondEnemy=!1),u.y===r&&(a.thirdEnemy=!1)})(),a.playerCar?(d.i%d.oneColumnBoxesCnt==0&&0!==d.i?(d.x+=d.pixelStep,d.y=d.startYposition):(d.i===d.allCreatedBlocks||d.i>d.allCreatedBlocks)&&(d.i=0,d.y=5,d.x=5),n.fillStyle="black",n.fillRect(d.x,d.y,25,25),n.clearRect(d.x+5,d.y+5,15,15),n.fillRect(d.x+8,d.y+8,9,9),d.y+=d.pixelStep,d.i+=1):(d.i=0,d.y=5,d.x=5)};setInterval(()=>T(),10)}]);
//# sourceMappingURL=script.js.map